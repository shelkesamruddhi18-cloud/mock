#include <iostream>
using namespace std;

#define MAX 100

// ---------------- Priority Queue Class ----------------
class PriorityQueue {
private:
    struct PQElement {
        int item;
        int priority;
    };
    PQElement queue[MAX];
    int size;

public:
    PriorityQueue() { size = 0; }

    // Insert element based on descending priority
    void insert(int item, int priority) {
        int i = 0;
        while (i < size && queue[i].priority >= priority)
            i++;
        for (int j = size; j > i; j--)
            queue[j] = queue[j - 1]; // shift elements right
        queue[i] = {item, priority};
        size++;
        cout << "Inserted (" << item << "," << priority << ")\n";
    }

    // Peek max element
    void peek() {
        if (size > 0)
            cout << "Peek: (" << queue[0].item << "," << queue[0].priority << ")\n";
        else
            cout << "Priority Queue empty\n";
    }

    // Extract max
    void extract_max() {
        if (size == 0) {
            cout << "Priority Queue empty\n";
            return;
        }
        cout << "Extracted: (" << queue[0].item << "," << queue[0].priority << ")\n";
        for (int i = 0; i < size - 1; i++)
            queue[i] = queue[i + 1]; // shift left
        size--;
    }

    // Display queue
    void display() {
        if (size == 0) { cout << "Priority Queue empty\n"; return; }
        cout << "Priority Queue: ";
        for (int i = 0; i < size; i++)
            cout << "(" << queue[i].item << "," << queue[i].priority << ") ";
        cout << "\n";
    }
};

// ---------------- Double-Ended Queue Class ----------------
class Deque {
private:
    int arr[MAX];
    int front, rear;

public:
    Deque() { front = rear = -1; }

    // Insert front
    void insertFront(int x) {
        if ((front == 0 && rear == MAX - 1) || (front == rear + 1)) {
            cout << "Deque full\n"; return;
        }
        if (front == -1) front = rear = 0;
        else if (front == 0) front = MAX - 1;
        else front--;
        arr[front] = x;
        cout << "Inserted " << x << " at front\n";
    }

    // Insert rear
    void insertRear(int x) {
        if ((front == 0 && rear == MAX - 1) || (front == rear + 1)) {
            cout << "Deque full\n"; return;
        }
        if (front == -1) front = rear = 0;
        else if (rear == MAX - 1) rear = 0;
        else rear++;
        arr[rear] = x;
        cout << "Inserted " << x << " at rear\n";
    }

    // Delete front
    void deleteFront() {
        if (front == -1) { cout << "Deque empty\n"; return; }
        cout << "Deleted " << arr[front] << " from front\n";
        if (front == rear) front = rear = -1;
        else if (front == MAX - 1) front = 0;
        else front++;
    }

    // Delete rear
    void deleteRear() {
        if (front == -1) { cout << "Deque empty\n"; return; }
        cout << "Deleted " << arr[rear] << " from rear\n";
        if (front == rear) front = rear = -1;
        else if (rear == 0) rear = MAX - 1;
        else rear--;
    }

    // Display Deque
    void display() {
        if (front == -1) { cout << "Deque empty\n"; return; }
        cout << "Deque elements: ";
        int i = front;
        while (true) {
            cout << arr[i] << " ";
            if (i == rear) break;
            i = (i + 1) % MAX;
        }
        cout << "\n";
    }
};

// ---------------- Main Menu ----------------
int main() {
    PriorityQueue pq;
    Deque dq;
    int choice, subchoice, item, priority;

    while (true) {
        cout << "\n1. Priority Queue\n2. Deque\n3. Exit\nChoice: ";
        cin >> choice;

        if (choice == 1) {
            cout << "1. Insert\n2. Peek\n3. Extract Max\n4. Display\nChoice: ";
            cin >> subchoice;
            switch(subchoice) {
                case 1: cout << "Enter item and priority: "; cin >> item >> priority; pq.insert(item, priority); break;
                case 2: pq.peek(); break;
                case 3: pq.extract_max(); break;
                case 4: pq.display(); break;
            }
        } 
        else if (choice == 2) {
            cout << "1. Insert Front\n2. Insert Rear\n3. Delete Front\n4. Delete Rear\n5. Display\nChoice: ";
            cin >> subchoice;
            switch(subchoice) {
                case 1: cout << "Enter item: "; cin >> item; dq.insertFront(item); break;
                case 2: cout << "Enter item: "; cin >> item; dq.insertRear(item); break;
                case 3: dq.deleteFront(); break;
                case 4: dq.deleteRear(); break;
                case 5: dq.display(); break;
            }
        } 
        else break;
    }

    return 0;
}
